@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html {
    font-family: 'Inter', system-ui, sans-serif;
  }
  
  body {
    @apply bg-gray-50 text-gray-900 transition-colors duration-300 dark:bg-gray-950 dark:text-gray-100;
  }

  /* Dark mode form styles */
  select option {
    @apply dark:bg-gray-800 dark:text-gray-100;
  }

  /* Dark mode scrollbar */
  ::-webkit-scrollbar {
    @apply w-2;
  }

  ::-webkit-scrollbar-track {
    @apply bg-gray-200 dark:bg-gray-800;
  }

  ::-webkit-scrollbar-thumb {
    @apply bg-gray-400 dark:bg-gray-600 rounded-full;
  }

  ::-webkit-scrollbar-thumb:hover {
    @apply bg-gray-500 dark:bg-gray-500;
  }
}

@layer components {
  /* Theme toggle animation */
  .theme-toggle .icon {
    transition: transform 300ms ease, opacity 300ms ease;
  }
  .theme-toggle .sun-icon {
    transform-origin: 50% 50%;
    opacity: 1;
  }
  .theme-toggle .moon-icon {
    transform-origin: 50% 50%;
    opacity: 0;
    transform: rotate(-90deg) scale(0.6);
  }
  .theme-toggle.is-dark .sun-icon {
    opacity: 0;
    transform: rotate(90deg) scale(0.6);
  }
  .theme-toggle.is-dark .moon-icon {
    opacity: 1;
    transform: rotate(0deg) scale(1);
  }
  .theme-toggle .sparkle {
    position: absolute;
    top: 50%; left: 50%;
    width: 2px; height: 2px;
    background: currentColor;
    border-radius: 9999px;
    opacity: 0;
    transform: translate(-50%, -50%) scale(0);
    animation: sparkle-burst 500ms ease-out forwards;
  }
  .theme-toggle .sparkle.s1 { transform: translate(-50%, -50%) rotate(0deg); }
  .theme-toggle .sparkle.s2 { transform: translate(-50%, -50%) rotate(60deg); }
  .theme-toggle .sparkle.s3 { transform: translate(-50%, -50%) rotate(120deg); }
  .theme-toggle .sparkle.s4 { transform: translate(-50%, -50%) rotate(180deg); }
  .theme-toggle .sparkle.s5 { transform: translate(-50%, -50%) rotate(240deg); }
  .theme-toggle .sparkle.s6 { transform: translate(-50%, -50%) rotate(300deg); }
  @keyframes sparkle-burst {
    0% { opacity: 0; transform: translate(-50%, -50%) scale(0); }
    30% { opacity: 1; }
    100% { opacity: 0; transform: translate(-50%, -250%) scale(1); }
  }

  .btn-primary {
    @apply bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200;
  }
  
  .btn-secondary {
    @apply bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium py-2 px-4 rounded-lg transition-colors duration-200;
  }
  
  .btn-danger {
    @apply bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200;
  }
  
  .input-field {
    @apply w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent;
  }
  
  .card {
    @apply bg-white rounded-lg shadow-sm border border-gray-200 p-6;
  }

  /* Line clamping utilities */
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* Mobile sidebar overlay */
  .sidebar-overlay {
    @apply fixed inset-0 bg-black bg-opacity-50 z-20;
  }

  /* Mobile sidebar */
  .mobile-sidebar {
    @apply fixed inset-y-0 left-0 z-30 w-64 bg-white shadow-lg transform transition-transform duration-300 ease-in-out;
  }

  .mobile-sidebar.closed {
    @apply -translate-x-full;
  }

  .mobile-sidebar.open {
    @apply translate-x-0;
  }

  /* Chat specific styles */
  .chat-container {
    @apply flex flex-col h-full min-h-0;
  }

  .chat-messages {
    @apply flex-1 overflow-y-auto p-3 sm:p-4 space-y-3 sm:space-y-4 min-h-0;
    overscroll-behavior: contain;
    overflow-x: hidden;
  }

  .chat-input {
    @apply border-t border-gray-200 p-3 sm:p-4 bg-white;
  }

  .conversation-item {
    @apply p-4 border rounded-lg cursor-pointer transition-all duration-200;
  }

  .conversation-item:hover {
    @apply hover:bg-gray-50 hover:border-gray-300;
  }

  .conversation-item.selected {
    @apply bg-blue-50 border-blue-200 shadow-sm ring-2 ring-blue-200;
  }

  .conversation-item.unread {
    @apply border-l-4 border-l-blue-500;
  }

  /* Message bubbles */
  .message-bubble {
    @apply max-w-[78%] sm:max-w-xs lg:max-w-md px-3 py-2 sm:px-4 rounded-lg break-words whitespace-pre-wrap;
  }

  .message-bubble.sent {
    @apply bg-blue-600 text-white;
  }

  .message-bubble.received {
    @apply bg-white border border-gray-200 text-gray-900 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-100;
  }

  /* Stronger dark override in case variants inside @apply are not picked up */
  .dark .message-bubble.received {
    @apply bg-gray-800 border-gray-700 text-gray-100;
  }
  .dark .message-bubble.received .text-gray-500 {
    @apply text-gray-300;
  }

  /* Loading states */
  .loading-spinner {
    @apply animate-spin rounded-full border-b-2 border-blue-600;
  }

  .loading-overlay {
    @apply absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center;
  }

  /* Form styles for dark mode */
  .form-input {
    @apply w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-800 dark:text-gray-100 dark:placeholder-gray-400 transition-colors;
  }

  .form-label {
    @apply block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2;
  }

  .form-select {
    @apply w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-800 dark:text-gray-100 transition-colors;
  }

  .form-checkbox {
    @apply h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600 rounded dark:bg-gray-800 transition-colors;
  }

  .form-textarea {
    @apply w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-800 dark:text-gray-100 dark:placeholder-gray-400 transition-colors;
  }

  .btn-primary-dark {
    @apply bg-blue-600 dark:bg-blue-500 text-white px-6 py-2 rounded-md text-sm font-medium hover:bg-blue-700 dark:hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-900 transition-colors;
  }

  .btn-secondary-dark {
    @apply px-6 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-900 transition-colors;
  }

  /* Action button styles for dark mode */
  .btn-action-blue {
    @apply inline-flex items-center px-4 py-2 bg-blue-600 dark:bg-blue-500 text-white rounded-lg hover:bg-blue-700 dark:hover:bg-blue-600 transition-colors;
  }

  .btn-action-green {
    @apply inline-flex items-center px-4 py-2 bg-green-600 dark:bg-green-500 text-white rounded-lg hover:bg-green-700 dark:hover:bg-green-600 disabled:opacity-50 transition-colors;
  }

  .btn-action-red {
    @apply inline-flex items-center px-4 py-2 bg-red-600 dark:bg-red-500 text-white rounded-lg hover:bg-red-700 dark:hover:bg-red-600 disabled:opacity-50 transition-colors;
  }

  /* Status badge styles for dark mode */
  .status-badge {
    @apply inline-flex px-2 py-1 text-xs font-semibold rounded-full;
  }

  .status-badge.success {
    @apply bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200;
  }

  .status-badge.warning {
    @apply bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200;
  }

  .status-badge.error {
    @apply bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200;
  }

  /* Product status badges */
  .product-status-active {
    @apply bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200;
  }

  .product-status-inactive {
    @apply bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200;
  }

  /* Table styles for dark mode */
  .table-header {
    @apply bg-gray-50 dark:bg-gray-800;
  }

  .table-row {
    @apply bg-white dark:bg-gray-900 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors;
  }

  .table-divider {
    @apply divide-y divide-gray-200 dark:divide-gray-700;
  }

  /* Card styles for dark mode */
  .card-dark {
    @apply bg-white dark:bg-gray-900 rounded-lg shadow border border-gray-200 dark:border-gray-800;
  }

  .card-section {
    @apply border border-gray-200 dark:border-gray-700 rounded-lg p-4 bg-gray-50 dark:bg-gray-800;
  }
}

/* Custom scrollbar for sidebar */
.sidebar-scroll::-webkit-scrollbar {
  width: 4px;
}

.sidebar-scroll::-webkit-scrollbar-track {
  background: transparent;
}

.sidebar-scroll::-webkit-scrollbar-thumb {
  background: #d1d5db;
  border-radius: 2px;
}

.sidebar-scroll::-webkit-scrollbar-thumb:hover {
  background: #9ca3af;
}

/* Custom scrollbar for chat messages */
.chat-messages::-webkit-scrollbar {
  width: 6px;
}

.chat-messages::-webkit-scrollbar-track {
  background: #f3f4f6;
  border-radius: 3px;
}

.chat-messages::-webkit-scrollbar-thumb {
  background: #d1d5db;
  border-radius: 3px;
}

.chat-messages::-webkit-scrollbar-thumb:hover {
  background: #9ca3af;
}

/* Custom scrollbar for conversation list */
.conversation-list {
  overscroll-behavior: contain;
  overflow-x: hidden;
}

.conversation-list::-webkit-scrollbar {
  width: 4px;
}

.conversation-list::-webkit-scrollbar-track {
  background: transparent;
}

.conversation-list::-webkit-scrollbar-thumb {
  background: #d1d5db;
  border-radius: 2px;
}

.conversation-list::-webkit-scrollbar-thumb:hover {
  background: #9ca3af;
}

/* Smooth transitions */
.transition-smooth {
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Focus states */
.focus-ring {
  @apply focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2;
}

/* Hover effects */
.hover-lift {
  transition: transform 0.2s ease-in-out;
}

.hover-lift:hover {
  transform: translateY(-1px);
}

/* Error states */
.error-shake {
  animation: shake 0.5s ease-in-out;
}

@keyframes shake {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-5px); }
  75% { transform: translateX(5px); }
}

/* Success states */
.success-pulse {
  animation: pulse 0.5s ease-in-out;
}

@keyframes pulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.05); }
  100% { transform: scale(1); }
}

/* Responsive design */
@media (max-width: 768px) {
  .chat-container {
    @apply h-full min-h-0;
  }
  
  .conversation-item {
    @apply p-3;
  }
  
  .message-bubble {
    @apply max-w-full;
  }
}

/* Dark mode support */
@media (prefers-color-scheme: dark) {
  .dark-mode {
    @apply bg-gray-900 text-white;
  }
  
  .dark-mode .card {
    @apply bg-gray-800 border-gray-700;
  }
  
  .dark-mode .conversation-item {
    @apply border-gray-700 hover:bg-gray-800;
  }
  
  .dark-mode .message-bubble.received {
    @apply bg-gray-800 border-gray-700 text-white;
  }
}

/* Dark mode form enhancements */
.dark .form-input:focus {
  @apply ring-blue-400 border-blue-400;
}

.dark .form-select:focus {
  @apply ring-blue-400 border-blue-400;
}

.dark .form-textarea:focus {
  @apply ring-blue-400 border-blue-400;
}

/* Dark mode button states */
.dark .btn-primary-dark:disabled {
  @apply opacity-50 cursor-not-allowed;
}

.dark .btn-secondary-dark:disabled {
  @apply opacity-50 cursor-not-allowed;
}

/* Dark mode action button states */
.dark .btn-action-blue:disabled {
  @apply opacity-50 cursor-not-allowed;
}

.dark .btn-action-green:disabled {
  @apply opacity-50 cursor-not-allowed;
}

.dark .btn-action-red:disabled {
  @apply opacity-50 cursor-not-allowed;
}

